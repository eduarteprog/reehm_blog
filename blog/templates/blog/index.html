{% extends 'blog/base.html' %}

{% block content %}
<style>
    body {
        background-color: #000000; 
    }
    .carousel {
        padding: 1vh;
        width: 100%;
        height: 50vh;
    }
    .carousel-item {
        height: 100%;
    }
    .carousel-item img {
        object-fit: cover;
        width: 100%;
        height: 100%;
        display: block;
    }
    .carousel-inner {
        width: 100%;
        height: 100%;
    }
    .carousel-caption {
        background-color: rgba(0, 0, 0, 0.5);
        padding: 20px;
        text-align: left;
    }
    .carousel-caption h1 {
        font-size: 2.5rem;
        color: #ffffff;
        font-family: 'Arial', sans-serif;
        text-align: center;
    }
    .titulo {
        text-align: center;
    }
    .carousel-caption p {
        color: #ffffff;
        padding-top: 10px;
        font-size: 1rem;
    }
    .share-button {
        padding-top: 10px;
        color: #ffffff;
        border: 1px solid #ffffff;
        background-color: transparent;
        padding: 5px 10px;
        font-size: 1rem;
        cursor: pointer;
    }
    .important-posts {
        width: 100%;
        padding-top: 2vh;
    }
    .important-post {
        padding: 20px;
        position: relative;
        background-color: #f0f0f0; 
        border-radius: 10px; 
        margin-bottom: 20px;
    }
    .important-post img {
        width: 100%;
        max-height: 30vh;
        object-fit: cover;
        border-radius: 10px 10px 0 0; 
    }
    .important-post .section-label {
        position: absolute;
        top: 10px;
        left: 10px;
        background-color: rgba(0, 0, 0, 0.7);
        color: #ffffff;
        padding: 5px 10px;
        font-size: 0.8rem;
        border-radius: 3px;
    }
    .other-posts {
        padding-top: 2vh;
    }
    .other-post {
        padding: 20px;
        background-color: #f0f0f0; 
        border-radius: 10px; 
        margin-bottom: 20px;
    }
    .other-post img {
        width: 100%;
        max-height: 20vh;
        object-fit: cover;
        border-radius: 10px 10px 0 0;
    }
    .read-more-link {
        color: #000000;
        text-decoration: none;
        font-style: oblique;
    }
    .read-more-link:hover {
        text-decoration: underline;
    }
</style>

{% if carrusel_posts %}
<div id="carouselExampleCaptions" class="carousel slide">
    <div class="carousel-inner">
        {% for post in carrusel_posts %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
            {% if post.image %}
            <a href="{% url 'post_detail' slug=post.slug %}">
                <img src="{{ post.image.url }}" alt="{{ post.title }}">
            </a>
            {% endif %}
            <div class="carousel-caption d-none d-md-block">
                <h1 class="titulo">
                    <a href="{% url 'post_detail' slug=post.slug %}" style="color: #ffffff; text-decoration: none;">{{ post.title }}</a>
                </h1>
                <p>Por: <b>{{ post.author }}</b> | {{ post.text|truncatewords:40 }} 
                    <a href="{% url 'post_detail' slug=post.slug %}" class="read-more-link">leer más</a>
                </p>
            </div>
        </div>
        {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>
{% endif %}

<!-- Importante -->
{% if importante_posts %}
<div class="important-posts">
    <div class="row">
        {% for post in importante_posts %}
        <div class="col-md-4">
            <div class="important-post">
                {% if post.image %}
                <a href="{% url 'post_detail' slug=post.slug %}">
                    <img src="{{ post.image.url }}" alt="{{ post.title }}" class="img-fluid">
                </a>
                <div class="section-label">{{ post.get_section_display }}</div>
                {% endif %}
                <h2 class="titulo">
                    <a href="{% url 'post_detail' slug=post.slug %}" style="color: #000000; text-decoration: none;">{{ post.title }} | Por: <b>{{ post.author }}</b></a>
                </h2>
                <p>{{ post.text|truncatewords:40 }} 
                    <a href="{% url 'post_detail' slug=post.slug %}" class="read-more-link" style="color: #000000;">leer más</a>
                </p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- Otras -->
{% if otras_posts %}
<div class="other-posts">
    <div class="row">
        {% for post in otras_posts %}
        <div class="col-md-3">
            <div class="other-post">
                {% if post.image %}
                <a href="{% url 'post_detail' slug=post.slug %}">
                    <img src="{{ post.image.url }}" alt="{{ post.title }}" class="img-fluid">
                </a>
                {% endif %}
                <h2 class="titulo">
                    <a href="{% url 'post_detail' slug=post.slug %}" style="color: #000000; text-decoration: none;">{{ post.title }}</a>
                </h2>
                <p>{{ post.text|truncatewords:40 }} 
                    <a href="{% url 'post_detail' slug=post.slug %}" class="read-more-link" style="color: #000000;">leer más</a>
                </p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<script>
    function copyToClipboard(url) {
        navigator.clipboard.writeText(url).then(function() {
            alert('¡Enlace copiado al portapapeles!');
        }, function(err) {
            alert('Error al copiar el enlace: ', err);
        });
    }
</script>
{% endblock %}
